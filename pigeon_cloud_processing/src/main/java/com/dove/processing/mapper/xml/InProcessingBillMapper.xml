<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.dove.processing.mapper.InProcessingBillMapper">

<sql id="selectAllBillInfo">
    select t.source ,t.inStorage,t.amount,t.total,t.remark
    from t_in_processing_bill t
</sql>

    <select id="getInBillsByNoPage" resultType="com.dove.processing.entity.Vo.InProcessingBothVo">
        select p.material_name,p.specification,p.price,p.count,p.remark,p.total,
        t.in_storage,t.amount,t.total_money,t.total_remark,t.enter_time
        from t_in_processing_info as p
        inner join t_in_processing_bill as t
        on p.in_id = t.in_id
        where p.is_deleted =0 and t.is_deleted =0
        order by t.gmt_create desc
    </select>

    <select id="getBusInfoBySource" resultType="com.dove.processing.entity.Vo.BusinessProcessingVo">
        select t.id,t.name,t.phone,t.contacts,t.type
        from t_business_processing t
        <if test="source != null and source != 0">
            inner join t_in_processing_bill p
            on t.id = p.source
            where p.source = ${source} and p.is_deleted = 0
        </if>
        order by t.gmt_create desc
        limit ${no},${size}
    </select>
</mapper>
